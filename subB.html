<title>B首页</title>
<meta charset="utf-8">
<h1>B首页 www.b.com:8084</h1>
<p>
    <p>用户信息：<span id="userInfo">未登录</span></p>
	<button onclick="login();" id="login">去sso登录</button>
    </p>
</p>
<script>
// 去sso登录
function login(){
	window.location.href="http://www.sso.com/sso.html?referUrl="+window.location.href;
}
//登出
function logout(){
//todo
}
//注册监听 有消息从父级(SSO页面请求)传来时 存贮 tokenData
window.addEventListener('message',function(e){
	if(e.source!=window.parent) return;
	localStorage.setItem("tokenData",e.data);
},false);

 window.onload = function() {
	//显示用户信息
	var tokenData=localStorage.getItem('tokenData');
	if(tokenData){
		document.getElementById('login').style.display='none';
	}
	document.getElementById('userInfo').innerHTML =tokenData;
}
</script>
